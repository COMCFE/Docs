# 等量发车

## 等量发车列表

#### 接口URL
> {{url}}/buses/all

#### 请求方式
> GET

#### 请求Query参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
|  limit   |  int   |  是  |         条目数量 默认 20          |
|  offset  |  int   |  是  |           偏移量 默认 0           |

#### 请求Header参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
| Authorization     | {{token}} |  必填 | token |


#### 成功响应示例
```json
{
    "msg": "ok",
    "code": 0,
    "data": [
        {
           "id": 1,
           "max_num": 300, /*最大上车人数*/
           "has_num": 0, /*已上车人数*/
           "cd_num": 0,  /*创豆总数*/
           "tg_num": 0,  /*糖果总数*/
           "cycle": 90,  /*周期*/
           "status": 1,  /*车次状态:1-检票中 2-行驶中 3-结算中 4-已完成*/
           "sort": 10,   /*排序*/
           "is_delete": 0,
           "created_at": "2020-08-13 11:27:06",
           "updated_at": "2020-08-13 11:27:06"
        }
    ]
}
```

## 我的车次列表

#### 接口URL
> {{url}}/buses/my

#### 请求方式
> GET

#### 请求Query参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
|  status   |  int   |  否 |         车次状态:1-检票中 2-行驶中 3-结算中 4-已完成          |
|  limit   |  int   |  是  |         条目数量 默认 20          |
|  offset  |  int   |  是  |           偏移量 默认 0           |

#### 请求Header参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
| Authorization     | {{token}} |  必填 | token |


#### 成功响应示例
```json
{
    "msg": "ok",
    "code": 0,
    "data": [
        {
            "id": 1,
            "user_id": 1,
            "bus_id": 1,
            "remain_cycle": 90,   /*剩余天数*/
            "tg_num": "10.0000",  /*糖果数量*/
            "cd_num": "500.0000", /*创豆数量*/
            "status": 1,          /*车次状态:1-检票中 2-行驶中 3-结算中 4-已完成*/
            "data": {     /*车辆信息*/
                  "id": 1,
                  "max_num": 300, /*最大上车人数*/
                  "has_num": 0, 
                  "cd_num": 0, 
                  "tg_num": 0, 
                  "cycle": 90,  /*周期*/
                  "status": 1,
                  "sort": 10,
                  "is_delete": 0,
                  "created_at": "2020-08-13 11:27:06",
                  "updated_at": "2020-08-13 11:27:06"
            },
             "bus": {
                "id": 1,
                "has_num": 1    /*已上车人数*/
            },
            "created_at": "2020-08-13 11:44:03",
            "updated_at": "2020-08-13 11:44:03",
            "expire_date": "2020-11-11 11:44:03"  /*到站时间*/
        }
    ]
}
```

## 我的车次详情

#### 接口URL
> {{url}}/buses/{bus}/show

#### 请求方式
> GET

#### 请求Query参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |

#### 请求Header参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
| Authorization     | {{token}} |  必填 | token |


#### 成功响应示例
```json
{
    "msg": "ok",
    "code": 0,
    "data": 
        {
            "id": 1,
            "user_id": 1,
            "bus_id": 1,
            "remain_cycle": 90,   /*剩余天数*/
            "tg_num": "10.0000",  /*糖果数量*/
            "cd_num": "500.0000", /*创豆数量*/
            "status": 1,          /*车次状态:1-检票中 2-行驶中 3-结算中 4-已完成*/
            "data": {     /*车辆信息*/
                  "id": 1,
                  "max_num": 300, /*最大上车人数*/
                  "has_num": 0, 
                  "cd_num": 0, 
                  "tg_num": 0, 
                  "cycle": 90,  /*周期*/
                  "status": 1,
                  "sort": 10,
                  "is_delete": 0,
                  "created_at": "2020-08-13 11:27:06",
                  "updated_at": "2020-08-13 11:27:06"
            },
             "bus": {
                "id": 1,
                "has_num": 1    /*已上车人数*/
            },
            "created_at": "2020-08-13 11:44:03",
            "updated_at": "2020-08-13 11:44:03",
            "expire_date": "2020-11-11 11:44:03"  /*到站时间*/
        }
}
```



## 买票上车

#### 接口URL
> {{url}}/buses/{bus}

#### 请求方式
> POST

#### 请求Header参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
| Authorization     | {{token}} |  必填 | token |

#### 请求Body参数

| 参数        | 示例值   | 是否必填   |  参数描述  |
| :--------   | :-----  | :-----  | :----  |
| tg_num     | 30 | 必填 | 糖果数量 |
| pay_pass     | 123 | 必填 | 支付密码 |

#### 成功响应示例
```json
{
	"msg": "购买成功",
	"code": 0,
	"data": null
}
```


